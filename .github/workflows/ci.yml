      name: CI
      
      on:
        push:
          branches: [ main ]
        pull_request:
          branches: [ main ]
      
      jobs:
        test:
          runs-on: ubuntu-latest
          steps:
            - name: Run Playwright tests
              run: npx playwright test --timeout=60000
      
            - name: Generate Allure report
              if: always()
              run: |
                # generate report from results (ignore failure to avoid failing the job on generation errors)
                npx allure generate allure-results --clean -o allure-report || true
      
            - name: Upload Allure report
              if: always()
              uses: actions/upload-artifact@v4
              with:
                name: allure-report
                path: allure-report